{% load static %}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Trends</title>
    <link rel="stylesheet" href="{% static 'dashboard/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'dashboard/vendor/bootstrap-icons/bootstrap-icons.css' %}">
    <link rel="stylesheet" href="{% static 'trending/css/style.css' %}">
</head>
<body class="bg-dark">
    <div class="app-container">
        
        <!-- Status Bar / Header (Same as Earning) -->
        <div class="status-bar">
            <div class="status-bar-right">
                <button class="status-bar-item" onclick="location.href='/'">üè† „Éõ„Éº„É†</button>
            </div>
        </div>

        <div class="content scrollable-content">
            
            <!-- Summary Section (2 Columns with Donut Charts) -->
            <div class="summary-section">
                <!-- Macro Chart -->
                <div class="summary-card">
                    <h5 class="summary-title">Macroeconomics</h5>
                    <div class="chart-container">
                        <div class="donut-chart" style="background: conic-gradient(var(--chart-color-macro) {{ macro_percent }}%, #2c2c2e 0);">
                            <div class="donut-inner">
                                <span class="chart-value">{{ macro_avg }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="sentiment-badge {% if macro_avg >= 3 %}long{% else %}short{% endif %}">
                        {% if macro_avg >= 3 %}LONG{% else %}SHORT{% endif %}
                    </div>
                </div>

                <!-- Stock Chart -->
                <div class="summary-card">
                    <h5 class="summary-title">Stock Market</h5>
                    <div class="chart-container">
                        <div class="donut-chart" style="background: conic-gradient(var(--chart-color-stock) {{ stock_percent }}%, #2c2c2e 0);">
                            <div class="donut-inner">
                                <span class="chart-value">{{ stock_avg }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="sentiment-badge {% if stock_avg >= 3 %}long{% else %}short{% endif %}">
                        {% if stock_avg >= 3 %}LONG{% else %}SHORT{% endif %}
                    </div>
                </div>
            </div>

            <!-- Macroeconomics List -->
            <div class="category-section">
                <h4 class="category-title">Macroeconomics</h4>
                <div class="analyst-list">
                    {% for analyst in macro_analysts %}
                    <div class="analyst-item">
                        <div class="analyst-info">
                            <div class="analyst-name">{{ analyst.name }}</div>
                            <div class="analyst-affil">{{ analyst.affiliation }}</div>
                        </div>
                        <div class="analyst-score score-{{ analyst.score }}">
                            {{ analyst.score }}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Stock Market List -->
            <div class="category-section">
                <h4 class="category-title">Stock Market</h4>
                <div class="analyst-list">
                    {% for analyst in stock_analysts %}
                    <div class="analyst-item">
                        <div class="analyst-info">
                            <div class="analyst-name">{{ analyst.name }}</div>
                            <div class="analyst-affil">{{ analyst.affiliation }}</div>
                        </div>
                        <div class="analyst-score score-{{ analyst.score }}">
                            {{ analyst.score }}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            
            <!-- Padding for bottom nav -->
            <div style="height: 60px;"></div>
        </div>

        <!-- Bottom Nav -->
        <div class="bottom-nav">
            <a class="nav-button" href="/calendar/"><i class="bi bi-calendar-week"></i></a>
            <a class="nav-button" href="{% url 'prompt:index' %}"><i class="bi bi-newspaper"></i></a>
            <a class="nav-button active" href="{% url 'trending:index' %}"><i class="bi bi-graph-up-arrow"></i></a>
        </div>
    </div>
</body>
</html>